"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}document.addEventListener("DOMContentLoaded",function(){console.log("ready!")},!1),Inputmask("phone").mask("input.phone"),Inputmask("email").mask("input.email");var currentTab=0,currentTabGroup=0,currentTabGroupThanks=0,currentTabIndex=0,tabsCounter=document.querySelectorAll(".tab-group")[currentTabGroup].querySelectorAll(".tab").length;function showHeader(){var e=document.querySelectorAll(".form-header");if(document.querySelectorAll(".tab")[currentTab].matches(".thanks"))return currentTabGroupThanks++,void _toConsumableArray(e).map(function(e){return e.classList.remove("show")});_toConsumableArray(e).map(function(e){return e.classList.remove("show")}),0===currentTabGroup&&0===currentTab?e[0].classList.add("show"):e[currentTab-currentTabGroupThanks].classList.add("show")}function progress(){var e=document.querySelector(".progress");if(null!==e){var t=currentTab-currentTabGroupThanks+1,r=100/document.querySelectorAll(".tab:not(.thanks)").length*t;e.querySelector(".progress-done").style.width=r+"%",e.querySelector(".total-pages").textContent=document.querySelectorAll(".tab:not(.thanks)").length,e.querySelector(".current-page").textContent=t}}function showTab(e){if(console.log("Текущая стр: "+(currentTab+1)),progress(),showHeader(),null!==document.querySelector(".tab")){var t=document.querySelectorAll(".tab");t[e].classList.add("active"),0===currentTab&&(document.querySelector("#nextBtn").textContent="Начнем!"),tabsCounter===document.querySelectorAll(".tab-group")[currentTabGroup].querySelectorAll(".tab").length||document.querySelectorAll(".tab")[currentTab].matches(".thanks")?(document.querySelector("#prevBtn").classList.add("hide"),document.querySelector("#prevBtn").classList.remove("show")):(document.querySelector("#prevBtn").classList.add("show"),document.querySelector("#prevBtn").classList.remove("hide"),document.querySelector("#nextBtn").textContent="Дальше"),e+1===t.length&&(document.querySelector("#nextBtn").innerHTML="Готово")}}function nextPrev(e){var t=document.querySelectorAll(".tab");return!(1==e&&!validateForm())&&(t[currentTab].classList.remove("active"),currentTab+=e,(tabsCounter+=e>0?-1:1)<=0&&nextGroup(),!(currentTab>=t.length)&&(document.querySelectorAll(".tab")[currentTab].matches(".thanks")?hideFormUI():showFormUI(),void showTab(currentTab)))}function nextGroup(){currentTabGroup++,tabsCounter=document.querySelectorAll(".tab-group")[currentTabGroup].querySelectorAll(".tab").length,document.querySelector("#prevBtn").classList.add("hide"),_toConsumableArray(document.querySelectorAll(".tab-group")).map(function(e){return e.classList.remove("active")}),document.querySelectorAll(".tab-group")[currentTabGroup].classList.add("active")}function hideFormUI(){var e=document.querySelectorAll(".form-header");document.querySelector(".panel-footer").classList.add("hide"),document.querySelector(".progress").classList.add("hide"),_toConsumableArray(e).map(function(e){return e.classList.remove("show")})}function showFormUI(){var e=document.querySelectorAll(".form-header");document.querySelector(".panel-footer").classList.remove("hide"),document.querySelector(".progress").classList.remove("hide"),e[0].classList.add("show")}function validateForm(){var e,t=!0;e=document.querySelectorAll(".tab")[currentTab].querySelectorAll(".required");for(var r=0;r<e.length;r++){if(e[r].matches(".input")){var n=e[r].querySelectorAll('input[type="text"]');if(n.length>0)for(var o=0;o<n.length;o++)""===n[o].value&&(n[o].closest(".input").className+=" invalid",t=!1);if((n=e[r].querySelectorAll("input.phone")).length>0)for(o=0;o<n.length;o++)Inputmask("phone").mask(n[o]).isComplete()||(n[o].closest(".input").className+=" invalid",t=!1);if((n=e[r].querySelectorAll("input.email")).length>0)for(o=0;o<n.length;o++)Inputmask("email").mask(n[o]).isComplete()||(n[o].closest(".input").className+=" invalid",t=!1)}if(e[r].matches(".radio-group")&&(e[r].querySelector('input[type="radio"]:checked')||(e[r].classList.add("invalid"),t=!1)),e[r].matches(".checkbox-group")&&(e[r].querySelector('input[type="checkbox"]:checked')||(e[r].classList.add("invalid"),t=!1)),e[r].matches(".textarea")){var a=e[r].querySelectorAll("textarea");if(a.length>0)for(o=0;o<a.length;o++)""===a[o].value&&(a[o].closest(".textarea").className+=" invalid",t=!1)}}return t}showTab(currentTab);for(var inputs=document.querySelectorAll('.required input[type="text"]'),i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(e){e.target.closest(".required").classList.remove("invalid")});inputs=document.querySelectorAll('.required input[type="radio"]');for(i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(e){e.target.closest(".required").classList.remove("invalid")});inputs=document.querySelectorAll('.required input[type="checkbox"]');for(i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(e){e.target.closest(".required").classList.remove("invalid")});inputs=document.querySelectorAll(".required textarea");for(i=0;i<inputs.length;i++)inputs[i].addEventListener("input",function(e){e.target.closest(".required").classList.remove("invalid")});